<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Overprint</title>
</head>
<style>
    body {
        background: #000;
        text-align: center;
    }
</style>

<body>
    <div id="pdf-content">
        <canvas id="canvas" ref="canvas"></canvas>
    </div>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/pdf.js/1.0.1000/pdf.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/pdf.js/1.0.1000/pdf.worker.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.12/vue.js'></script>
    <script>
        new Vue({
            el: '#pdf-content',
            data: function() {
                return {
                    file: "PDF/formTest.pdf",
                    pageNumber: 1,
                    pageTotal: 1,
                    pdf: {},
                    page: {},
                    canvas: null
                }
            },
            mounted() {
                this.canvas = this.$refs.canvas;
                //this.canvas = document.getElementById("canvas");//與畫面的dom綁定
                this.showPdf(this.file, this.pageNumber)
            },
            methods: {
                showPdf: function(file, pageNumber) {
                    pageNumber = pageNumber || 1
                    console.log('showPdf')
                    PDFJS.getDocument(file).then((pdf) => {
                        this.pdf = pdf
                        pdf.getPage(pageNumber).then((page) => {
                            this.page = page
                            var scale = 3;
                            var defaultViewport = page.getViewport(1); //倍數
                            var innerWidth = document.body.offsetWidth //window.innerWidth;
                            var viewport = page.getViewport(innerWidth / defaultViewport.width) //依body大小顯示 
                                //var canvas = document.createElement('canvas');
                            var context = this.canvas.getContext('2d');
                            this.canvas.height = viewport.height;
                            this.canvas.width = viewport.width;

                            var renderContext = {
                                canvasContext: context,
                                viewport: viewport
                            };
                            page.render(renderContext);

                            //document.getElementById('pdf-content').appendChild(canvas);
                        });
                    })
                }
            },
        })
    </script>
</body>

</html>